{% extends 'base.html' %}
{% block content %}
<h2>Available Services</h2>

<!-- Filter Form -->

<form method="get" class="mb-3 d-flex gap-2">
    <input type="text" name="q" value="{{ query }}" placeholder="Search services....." class="form-control" style="max-width: 300px;">

    <select name="category" class="form-select" style="max-width: 200px">
        <option value="All" {% if category == 'All' %}selected{% endif %}>All Categories</option>
        <option value="Tutoring" {% if category == 'Tutoring' %}selected{% endif %}>Tutoring</option>
        <option value="Tech Help" {% if category == 'Tech Help' %}selected{% endif %}>Tech Help</option>
        <option value="Sewing" {% if category == 'Sewing' %}selected{% endif %}>Sewing</option>
        <option value="Gardening" {% if category == 'Gardening' %}selected{% endif %}>Gardening</option>
        <option value="Other" {% if category == 'Other' %}selected{% endif %}>Other</option>
    </select>
    <button type="submit" class="btn btn-primary">Filter</button>

</form>

{% if services %}

<div class="list-group">
    {% for service in services %}
    <div class="list-group-item">
        <h5>{{ service.title }}</h5>
        <p>
         <strong>Category:</strong> {{ service.category }} <br>
         <strong>Rate:</strong> Â£{{ service.rate_per_hour }} / hour <br>
         <strong>Posted by:</strong> {{service.provider.username }}
        </p>
        <a href="{% url 'book_service' service.id %}" class="btn btn-sm btn-primary mt-2">Book This service</a>
    </div>
    {% endfor %}
</div>
{% else %}
<p>No services are currently available</p>
{% endif %}
{% endblock %}
